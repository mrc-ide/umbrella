<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="umbrella">
<title>Fitting rainfall profiles • umbrella</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Fitting rainfall profiles">
<meta property="og:description" content="umbrella">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">umbrella</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Fitting-rainfall-profiles.html">Fitting rainfall profiles</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="Fitting-rainfall-profiles_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Fitting rainfall profiles</h1>
            
      
      
      <div class="d-none name"><code>Fitting-rainfall-profiles.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">umbrella</span><span class="op">)</span></span></code></pre></div>
<p>Below is an example workflow for using the umbrella package to fit rainfall profiles for use in malariasimulation.</p>
<p>First you’ll need to download the rasters and extract the raw data. There are some helper function to download global daily rainfall rasters in the package. You can use the <code><a href="../reference/get_urls.html">get_urls()</a></code> function to create the URLs to get daily rainfall rasters for a given year. After that the <code><a href="../reference/download_raster.html">download_raster()</a></code> can be used to download the rasters to your device. Beware that the set of unzipped rasters for a whole year will take up quite a bit of memory (each raster is about 2.2 MB).</p>
<p>Once you have you set of rasters you can load them and extract the data. For this I recommend getting a <code>sf</code> shape file with the boundaries of the area you would like to extract the data for. The R package <code>terra</code> is a great way to extract the data, something like:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_raster_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"rainfall1.tif"</span>, <span class="st">"rainfall2.tif"</span><span class="op">)</span></span>
<span><span class="va">my_raster</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu">rast</span><span class="op">(</span><span class="va">my_raster_files</span><span class="op">)</span></span>
<span><span class="va">my_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="st">"my_sf.rds"</span><span class="op">)</span></span>
<span><span class="va">extract_data</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu">extract</span><span class="op">(</span><span class="va">my_raster</span>, <span class="va">my_sf</span>, fun <span class="op">=</span> <span class="va">mean</span><span class="op">)</span></span></code></pre></div>
<p>Once you’ve extracted and tidied the output, you might have somethig like:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rainfall</span></span>
<span><span class="co">#&gt;     day rainfall</span></span>
<span><span class="co">#&gt; 1     1     0.00</span></span>
<span><span class="co">#&gt; 2     2     0.00</span></span>
<span><span class="co">#&gt; 3     3     0.00</span></span>
<span><span class="co">#&gt; 4     4     0.28</span></span>
<span><span class="co">#&gt; 5     5     0.17</span></span>
<span><span class="co">#&gt; 6     6     0.03</span></span>
<span><span class="co">#&gt; 7     7     0.00</span></span>
<span><span class="co">#&gt; 8     8     0.00</span></span>
<span><span class="co">#&gt; 9     9     0.00</span></span>
<span><span class="co">#&gt; 10   10     0.42</span></span>
<span><span class="co">#&gt; 11   11     0.10</span></span>
<span><span class="co">#&gt; 12   12     0.00</span></span>
<span><span class="co">#&gt; 13   13     0.10</span></span>
<span><span class="co">#&gt; 14   14     0.00</span></span>
<span><span class="co">#&gt; 15   15     0.00</span></span>
<span><span class="co">#&gt; 16   16     0.00</span></span>
<span><span class="co">#&gt; 17   17     0.00</span></span>
<span><span class="co">#&gt; 18   18     0.00</span></span>
<span><span class="co">#&gt; 19   19     0.00</span></span>
<span><span class="co">#&gt; 20   20     0.00</span></span>
<span><span class="co">#&gt; 21   21     0.00</span></span>
<span><span class="co">#&gt; 22   22     0.01</span></span>
<span><span class="co">#&gt; 23   23     0.02</span></span>
<span><span class="co">#&gt; 24   24     0.02</span></span>
<span><span class="co">#&gt; 25   25     0.00</span></span>
<span><span class="co">#&gt; 26   26     0.00</span></span>
<span><span class="co">#&gt; 27   27     0.00</span></span>
<span><span class="co">#&gt; 28   28     0.00</span></span>
<span><span class="co">#&gt; 29   29     0.00</span></span>
<span><span class="co">#&gt; 30   30     0.00</span></span>
<span><span class="co">#&gt; 31   31     0.02</span></span>
<span><span class="co">#&gt; 32   32     0.03</span></span>
<span><span class="co">#&gt; 33   33     0.00</span></span>
<span><span class="co">#&gt; 34   34     0.00</span></span>
<span><span class="co">#&gt; 35   35     0.05</span></span>
<span><span class="co">#&gt; 36   36     0.04</span></span>
<span><span class="co">#&gt; 37   37     0.00</span></span>
<span><span class="co">#&gt; 38   38     0.00</span></span>
<span><span class="co">#&gt; 39   39     0.00</span></span>
<span><span class="co">#&gt; 40   40     0.00</span></span>
<span><span class="co">#&gt; 41   41     0.08</span></span>
<span><span class="co">#&gt; 42   42     0.00</span></span>
<span><span class="co">#&gt; 43   43     0.00</span></span>
<span><span class="co">#&gt; 44   44     0.00</span></span>
<span><span class="co">#&gt; 45   45     0.00</span></span>
<span><span class="co">#&gt; 46   46     0.00</span></span>
<span><span class="co">#&gt; 47   47     0.06</span></span>
<span><span class="co">#&gt; 48   48     0.01</span></span>
<span><span class="co">#&gt; 49   49     0.00</span></span>
<span><span class="co">#&gt; 50   50     0.00</span></span>
<span><span class="co">#&gt; 51   51     0.00</span></span>
<span><span class="co">#&gt; 52   52     0.00</span></span>
<span><span class="co">#&gt; 53   53     0.00</span></span>
<span><span class="co">#&gt; 54   54     0.00</span></span>
<span><span class="co">#&gt; 55   55     0.00</span></span>
<span><span class="co">#&gt; 56   56     0.00</span></span>
<span><span class="co">#&gt; 57   57     0.00</span></span>
<span><span class="co">#&gt; 58   58     0.00</span></span>
<span><span class="co">#&gt; 59   59     0.00</span></span>
<span><span class="co">#&gt; 60   60     0.00</span></span>
<span><span class="co">#&gt; 61   61     0.00</span></span>
<span><span class="co">#&gt; 62   62     0.00</span></span>
<span><span class="co">#&gt; 63   63     0.00</span></span>
<span><span class="co">#&gt; 64   64     0.00</span></span>
<span><span class="co">#&gt; 65   65     0.00</span></span>
<span><span class="co">#&gt; 66   66     0.00</span></span>
<span><span class="co">#&gt; 67   67     0.00</span></span>
<span><span class="co">#&gt; 68   68     0.00</span></span>
<span><span class="co">#&gt; 69   69     0.00</span></span>
<span><span class="co">#&gt; 70   70     0.00</span></span>
<span><span class="co">#&gt; 71   71     0.00</span></span>
<span><span class="co">#&gt; 72   72     0.00</span></span>
<span><span class="co">#&gt; 73   73     0.00</span></span>
<span><span class="co">#&gt; 74   74     0.00</span></span>
<span><span class="co">#&gt; 75   75     0.00</span></span>
<span><span class="co">#&gt; 76   76     0.00</span></span>
<span><span class="co">#&gt; 77   77     0.00</span></span>
<span><span class="co">#&gt; 78   78     0.00</span></span>
<span><span class="co">#&gt; 79   79     0.00</span></span>
<span><span class="co">#&gt; 80   80     0.00</span></span>
<span><span class="co">#&gt; 81   81     0.00</span></span>
<span><span class="co">#&gt; 82   82     0.00</span></span>
<span><span class="co">#&gt; 83   83     0.00</span></span>
<span><span class="co">#&gt; 84   84     0.00</span></span>
<span><span class="co">#&gt; 85   85     0.00</span></span>
<span><span class="co">#&gt; 86   86     0.00</span></span>
<span><span class="co">#&gt; 87   87     0.00</span></span>
<span><span class="co">#&gt; 88   88     0.00</span></span>
<span><span class="co">#&gt; 89   89     0.00</span></span>
<span><span class="co">#&gt; 90   90     0.00</span></span>
<span><span class="co">#&gt; 91   91     0.00</span></span>
<span><span class="co">#&gt; 92   92     0.00</span></span>
<span><span class="co">#&gt; 93   93     0.00</span></span>
<span><span class="co">#&gt; 94   94     0.00</span></span>
<span><span class="co">#&gt; 95   95     0.00</span></span>
<span><span class="co">#&gt; 96   96     0.00</span></span>
<span><span class="co">#&gt; 97   97     0.00</span></span>
<span><span class="co">#&gt; 98   98     0.00</span></span>
<span><span class="co">#&gt; 99   99     0.00</span></span>
<span><span class="co">#&gt; 100 100     0.00</span></span>
<span><span class="co">#&gt; 101 101     0.00</span></span>
<span><span class="co">#&gt; 102 102     0.00</span></span>
<span><span class="co">#&gt; 103 103     0.00</span></span>
<span><span class="co">#&gt; 104 104     0.00</span></span>
<span><span class="co">#&gt; 105 105     0.00</span></span>
<span><span class="co">#&gt; 106 106     0.00</span></span>
<span><span class="co">#&gt; 107 107     0.00</span></span>
<span><span class="co">#&gt; 108 108     0.00</span></span>
<span><span class="co">#&gt; 109 109     0.00</span></span>
<span><span class="co">#&gt; 110 110     0.00</span></span>
<span><span class="co">#&gt; 111 111     0.00</span></span>
<span><span class="co">#&gt; 112 112     0.00</span></span>
<span><span class="co">#&gt; 113 113     0.00</span></span>
<span><span class="co">#&gt; 114 114     0.00</span></span>
<span><span class="co">#&gt; 115 115     0.01</span></span>
<span><span class="co">#&gt; 116 116     0.00</span></span>
<span><span class="co">#&gt; 117 117     0.00</span></span>
<span><span class="co">#&gt; 118 118     0.00</span></span>
<span><span class="co">#&gt; 119 119     0.00</span></span>
<span><span class="co">#&gt; 120 120     0.00</span></span>
<span><span class="co">#&gt; 121 121     0.00</span></span>
<span><span class="co">#&gt; 122 122     0.00</span></span>
<span><span class="co">#&gt; 123 123     0.00</span></span>
<span><span class="co">#&gt; 124 124     0.00</span></span>
<span><span class="co">#&gt; 125 125     0.00</span></span>
<span><span class="co">#&gt; 126 126     0.00</span></span>
<span><span class="co">#&gt; 127 127     0.00</span></span>
<span><span class="co">#&gt; 128 128     0.00</span></span>
<span><span class="co">#&gt; 129 129     0.00</span></span>
<span><span class="co">#&gt; 130 130     0.00</span></span>
<span><span class="co">#&gt; 131 131     0.00</span></span>
<span><span class="co">#&gt; 132 132     0.00</span></span>
<span><span class="co">#&gt; 133 133     0.00</span></span>
<span><span class="co">#&gt; 134 134     0.00</span></span>
<span><span class="co">#&gt; 135 135     0.00</span></span>
<span><span class="co">#&gt; 136 136     0.00</span></span>
<span><span class="co">#&gt; 137 137     0.00</span></span>
<span><span class="co">#&gt; 138 138     0.00</span></span>
<span><span class="co">#&gt; 139 139     0.00</span></span>
<span><span class="co">#&gt; 140 140     0.00</span></span>
<span><span class="co">#&gt; 141 141     0.00</span></span>
<span><span class="co">#&gt; 142 142     0.00</span></span>
<span><span class="co">#&gt; 143 143     0.00</span></span>
<span><span class="co">#&gt; 144 144     0.00</span></span>
<span><span class="co">#&gt; 145 145     0.00</span></span>
<span><span class="co">#&gt; 146 146     0.00</span></span>
<span><span class="co">#&gt; 147 147     0.00</span></span>
<span><span class="co">#&gt; 148 148     0.00</span></span>
<span><span class="co">#&gt; 149 149     0.00</span></span>
<span><span class="co">#&gt; 150 150     0.00</span></span>
<span><span class="co">#&gt; 151 151     0.00</span></span>
<span><span class="co">#&gt; 152 152     0.00</span></span>
<span><span class="co">#&gt; 153 153     0.00</span></span>
<span><span class="co">#&gt; 154 154     0.00</span></span>
<span><span class="co">#&gt; 155 155     0.00</span></span>
<span><span class="co">#&gt; 156 156     0.00</span></span>
<span><span class="co">#&gt; 157 157     0.79</span></span>
<span><span class="co">#&gt; 158 158     0.00</span></span>
<span><span class="co">#&gt; 159 159     0.00</span></span>
<span><span class="co">#&gt; 160 160     0.00</span></span>
<span><span class="co">#&gt; 161 161     0.00</span></span>
<span><span class="co">#&gt; 162 162     0.67</span></span>
<span><span class="co">#&gt; 163 163     0.00</span></span>
<span><span class="co">#&gt; 164 164     0.23</span></span>
<span><span class="co">#&gt; 165 165     0.00</span></span>
<span><span class="co">#&gt; 166 166     0.06</span></span>
<span><span class="co">#&gt; 167 167     0.00</span></span>
<span><span class="co">#&gt; 168 168     0.00</span></span>
<span><span class="co">#&gt; 169 169     0.00</span></span>
<span><span class="co">#&gt; 170 170     0.00</span></span>
<span><span class="co">#&gt; 171 171     0.39</span></span>
<span><span class="co">#&gt; 172 172     0.00</span></span>
<span><span class="co">#&gt; 173 173     0.00</span></span>
<span><span class="co">#&gt; 174 174     0.00</span></span>
<span><span class="co">#&gt; 175 175     0.00</span></span>
<span><span class="co">#&gt; 176 176     0.00</span></span>
<span><span class="co">#&gt; 177 177     0.00</span></span>
<span><span class="co">#&gt; 178 178     0.00</span></span>
<span><span class="co">#&gt; 179 179     0.00</span></span>
<span><span class="co">#&gt; 180 180     0.00</span></span>
<span><span class="co">#&gt; 181 181     3.85</span></span>
<span><span class="co">#&gt; 182 182     2.11</span></span>
<span><span class="co">#&gt; 183 183     0.00</span></span>
<span><span class="co">#&gt; 184 184     0.00</span></span>
<span><span class="co">#&gt; 185 185     0.00</span></span>
<span><span class="co">#&gt; 186 186     0.05</span></span>
<span><span class="co">#&gt; 187 187     0.00</span></span>
<span><span class="co">#&gt; 188 188     0.00</span></span>
<span><span class="co">#&gt; 189 189     0.00</span></span>
<span><span class="co">#&gt; 190 190     0.00</span></span>
<span><span class="co">#&gt; 191 191     0.00</span></span>
<span><span class="co">#&gt; 192 192     0.00</span></span>
<span><span class="co">#&gt; 193 193     0.00</span></span>
<span><span class="co">#&gt; 194 194     0.09</span></span>
<span><span class="co">#&gt; 195 195     0.00</span></span>
<span><span class="co">#&gt; 196 196     0.00</span></span>
<span><span class="co">#&gt; 197 197     1.41</span></span>
<span><span class="co">#&gt; 198 198     0.00</span></span>
<span><span class="co">#&gt; 199 199     0.00</span></span>
<span><span class="co">#&gt; 200 200     0.00</span></span>
<span><span class="co">#&gt; 201 201     0.00</span></span>
<span><span class="co">#&gt; 202 202     0.00</span></span>
<span><span class="co">#&gt; 203 203     0.00</span></span>
<span><span class="co">#&gt; 204 204     0.00</span></span>
<span><span class="co">#&gt; 205 205     0.00</span></span>
<span><span class="co">#&gt; 206 206     7.83</span></span>
<span><span class="co">#&gt; 207 207     0.00</span></span>
<span><span class="co">#&gt; 208 208     0.00</span></span>
<span><span class="co">#&gt; 209 209     2.38</span></span>
<span><span class="co">#&gt; 210 210     1.42</span></span>
<span><span class="co">#&gt; 211 211     1.48</span></span>
<span><span class="co">#&gt; 212 212     0.00</span></span>
<span><span class="co">#&gt; 213 213     0.00</span></span>
<span><span class="co">#&gt; 214 214     0.00</span></span>
<span><span class="co">#&gt; 215 215     0.00</span></span>
<span><span class="co">#&gt; 216 216     0.00</span></span>
<span><span class="co">#&gt; 217 217     0.00</span></span>
<span><span class="co">#&gt; 218 218     0.04</span></span>
<span><span class="co">#&gt; 219 219     0.00</span></span>
<span><span class="co">#&gt; 220 220     0.00</span></span>
<span><span class="co">#&gt; 221 221     0.00</span></span>
<span><span class="co">#&gt; 222 222     0.00</span></span>
<span><span class="co">#&gt; 223 223     0.00</span></span>
<span><span class="co">#&gt; 224 224    10.83</span></span>
<span><span class="co">#&gt; 225 225     0.00</span></span>
<span><span class="co">#&gt; 226 226     0.00</span></span>
<span><span class="co">#&gt; 227 227     0.00</span></span>
<span><span class="co">#&gt; 228 228     0.00</span></span>
<span><span class="co">#&gt; 229 229    13.38</span></span>
<span><span class="co">#&gt; 230 230    15.94</span></span>
<span><span class="co">#&gt; 231 231    12.11</span></span>
<span><span class="co">#&gt; 232 232     0.00</span></span>
<span><span class="co">#&gt; 233 233     4.66</span></span>
<span><span class="co">#&gt; 234 234    38.40</span></span>
<span><span class="co">#&gt; 235 235     0.00</span></span>
<span><span class="co">#&gt; 236 236     0.00</span></span>
<span><span class="co">#&gt; 237 237     0.00</span></span>
<span><span class="co">#&gt; 238 238     0.00</span></span>
<span><span class="co">#&gt; 239 239     3.50</span></span>
<span><span class="co">#&gt; 240 240    10.14</span></span>
<span><span class="co">#&gt; 241 241    33.02</span></span>
<span><span class="co">#&gt; 242 242    17.16</span></span>
<span><span class="co">#&gt; 243 243     0.00</span></span>
<span><span class="co">#&gt; 244 244     0.00</span></span>
<span><span class="co">#&gt; 245 245    20.81</span></span>
<span><span class="co">#&gt; 246 246     0.34</span></span>
<span><span class="co">#&gt; 247 247    21.36</span></span>
<span><span class="co">#&gt; 248 248    10.68</span></span>
<span><span class="co">#&gt; 249 249     0.00</span></span>
<span><span class="co">#&gt; 250 250    13.19</span></span>
<span><span class="co">#&gt; 251 251     0.00</span></span>
<span><span class="co">#&gt; 252 252     6.84</span></span>
<span><span class="co">#&gt; 253 253    18.92</span></span>
<span><span class="co">#&gt; 254 254     3.53</span></span>
<span><span class="co">#&gt; 255 255     4.95</span></span>
<span><span class="co">#&gt; 256 256     3.29</span></span>
<span><span class="co">#&gt; 257 257     6.58</span></span>
<span><span class="co">#&gt; 258 258     1.33</span></span>
<span><span class="co">#&gt; 259 259    13.20</span></span>
<span><span class="co">#&gt; 260 260     0.00</span></span>
<span><span class="co">#&gt; 261 261     0.00</span></span>
<span><span class="co">#&gt; 262 262    23.29</span></span>
<span><span class="co">#&gt; 263 263     5.97</span></span>
<span><span class="co">#&gt; 264 264     1.61</span></span>
<span><span class="co">#&gt; 265 265     9.02</span></span>
<span><span class="co">#&gt; 266 266     0.00</span></span>
<span><span class="co">#&gt; 267 267     0.00</span></span>
<span><span class="co">#&gt; 268 268     0.00</span></span>
<span><span class="co">#&gt; 269 269     0.85</span></span>
<span><span class="co">#&gt; 270 270     0.00</span></span>
<span><span class="co">#&gt; 271 271     0.00</span></span>
<span><span class="co">#&gt; 272 272     0.00</span></span>
<span><span class="co">#&gt; 273 273     1.05</span></span>
<span><span class="co">#&gt; 274 274     0.00</span></span>
<span><span class="co">#&gt; 275 275     0.00</span></span>
<span><span class="co">#&gt; 276 276     9.11</span></span>
<span><span class="co">#&gt; 277 277     7.22</span></span>
<span><span class="co">#&gt; 278 278     0.74</span></span>
<span><span class="co">#&gt; 279 279     0.00</span></span>
<span><span class="co">#&gt; 280 280     1.36</span></span>
<span><span class="co">#&gt; 281 281     0.00</span></span>
<span><span class="co">#&gt; 282 282     7.57</span></span>
<span><span class="co">#&gt; 283 283     0.00</span></span>
<span><span class="co">#&gt; 284 284     0.00</span></span>
<span><span class="co">#&gt; 285 285     0.00</span></span>
<span><span class="co">#&gt; 286 286     4.19</span></span>
<span><span class="co">#&gt; 287 287     5.86</span></span>
<span><span class="co">#&gt; 288 288     0.63</span></span>
<span><span class="co">#&gt; 289 289     0.41</span></span>
<span><span class="co">#&gt; 290 290     0.00</span></span>
<span><span class="co">#&gt; 291 291     0.00</span></span>
<span><span class="co">#&gt; 292 292     0.00</span></span>
<span><span class="co">#&gt; 293 293     0.00</span></span>
<span><span class="co">#&gt; 294 294     0.00</span></span>
<span><span class="co">#&gt; 295 295     0.00</span></span>
<span><span class="co">#&gt; 296 296     0.00</span></span>
<span><span class="co">#&gt; 297 297     0.00</span></span>
<span><span class="co">#&gt; 298 298     0.00</span></span>
<span><span class="co">#&gt; 299 299     0.00</span></span>
<span><span class="co">#&gt; 300 300     0.00</span></span>
<span><span class="co">#&gt; 301 301     0.00</span></span>
<span><span class="co">#&gt; 302 302     0.00</span></span>
<span><span class="co">#&gt; 303 303     0.00</span></span>
<span><span class="co">#&gt; 304 304     0.00</span></span>
<span><span class="co">#&gt; 305 305     0.00</span></span>
<span><span class="co">#&gt; 306 306     0.00</span></span>
<span><span class="co">#&gt; 307 307     0.00</span></span>
<span><span class="co">#&gt; 308 308     0.00</span></span>
<span><span class="co">#&gt; 309 309     0.00</span></span>
<span><span class="co">#&gt; 310 310     0.00</span></span>
<span><span class="co">#&gt; 311 311     0.00</span></span>
<span><span class="co">#&gt; 312 312     0.00</span></span>
<span><span class="co">#&gt; 313 313     0.03</span></span>
<span><span class="co">#&gt; 314 314     0.17</span></span>
<span><span class="co">#&gt; 315 315     0.05</span></span>
<span><span class="co">#&gt; 316 316     0.02</span></span>
<span><span class="co">#&gt; 317 317     0.03</span></span>
<span><span class="co">#&gt; 318 318     0.02</span></span>
<span><span class="co">#&gt; 319 319     0.05</span></span>
<span><span class="co">#&gt; 320 320     0.01</span></span>
<span><span class="co">#&gt; 321 321     0.01</span></span>
<span><span class="co">#&gt; 322 322     0.00</span></span>
<span><span class="co">#&gt; 323 323     0.00</span></span>
<span><span class="co">#&gt; 324 324     0.00</span></span>
<span><span class="co">#&gt; 325 325     0.00</span></span>
<span><span class="co">#&gt; 326 326     0.00</span></span>
<span><span class="co">#&gt; 327 327     0.00</span></span>
<span><span class="co">#&gt; 328 328     0.00</span></span>
<span><span class="co">#&gt; 329 329     0.00</span></span>
<span><span class="co">#&gt; 330 330     0.00</span></span>
<span><span class="co">#&gt; 331 331     0.00</span></span>
<span><span class="co">#&gt; 332 332     0.00</span></span>
<span><span class="co">#&gt; 333 333     0.00</span></span>
<span><span class="co">#&gt; 334 334     0.00</span></span>
<span><span class="co">#&gt; 335 335     0.00</span></span>
<span><span class="co">#&gt; 336 336     0.00</span></span>
<span><span class="co">#&gt; 337 337     0.00</span></span>
<span><span class="co">#&gt; 338 338     0.01</span></span>
<span><span class="co">#&gt; 339 339     0.02</span></span>
<span><span class="co">#&gt; 340 340     0.10</span></span>
<span><span class="co">#&gt; 341 341     0.00</span></span>
<span><span class="co">#&gt; 342 342     0.00</span></span>
<span><span class="co">#&gt; 343 343     0.00</span></span>
<span><span class="co">#&gt; 344 344     0.00</span></span>
<span><span class="co">#&gt; 345 345     0.75</span></span>
<span><span class="co">#&gt; 346 346     0.00</span></span>
<span><span class="co">#&gt; 347 347     0.00</span></span>
<span><span class="co">#&gt; 348 348     0.00</span></span>
<span><span class="co">#&gt; 349 349     0.00</span></span>
<span><span class="co">#&gt; 350 350     0.00</span></span>
<span><span class="co">#&gt; 351 351     0.00</span></span>
<span><span class="co">#&gt; 352 352     0.00</span></span>
<span><span class="co">#&gt; 353 353     0.00</span></span>
<span><span class="co">#&gt; 354 354     0.00</span></span>
<span><span class="co">#&gt; 355 355     0.00</span></span>
<span><span class="co">#&gt; 356 356     0.00</span></span>
<span><span class="co">#&gt; 357 357     0.00</span></span>
<span><span class="co">#&gt; 358 358     0.00</span></span>
<span><span class="co">#&gt; 359 359     0.00</span></span>
<span><span class="co">#&gt; 360 360     0.00</span></span>
<span><span class="co">#&gt; 361 361     0.00</span></span>
<span><span class="co">#&gt; 362 362     0.00</span></span>
<span><span class="co">#&gt; 363 363     0.00</span></span>
<span><span class="co">#&gt; 364 364     0.00</span></span>
<span><span class="co">#&gt; 365 365     0.00</span></span></code></pre></div>
<p>Lets fit a simple seasonal profile to this dataset, and a profile with an imposed minimum rainfall floor.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fit_fourier.html">fit_fourier</a></span><span class="op">(</span>rainfall <span class="op">=</span> <span class="va">rainfall</span><span class="op">$</span><span class="va">rainfall</span>, t <span class="op">=</span> <span class="va">rainfall</span><span class="op">$</span><span class="va">day</span>, floor <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">predict_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fourier_predict.html">fourier_predict</a></span><span class="op">(</span>coef <span class="op">=</span> <span class="va">fit1</span><span class="op">$</span><span class="va">coefficients</span>, t <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">365</span>, floor <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fit2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fit_fourier.html">fit_fourier</a></span><span class="op">(</span>rainfall <span class="op">=</span> <span class="va">rainfall</span><span class="op">$</span><span class="va">rainfall</span>, t <span class="op">=</span> <span class="va">rainfall</span><span class="op">$</span><span class="va">day</span>, floor <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">predict_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fourier_predict.html">fourier_predict</a></span><span class="op">(</span>coef <span class="op">=</span> <span class="va">fit1</span><span class="op">$</span><span class="va">coefficients</span>, t <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">365</span>, floor <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rainfall</span>, xlab <span class="op">=</span> <span class="st">"Day"</span>, ylab <span class="op">=</span> <span class="st">"Rainfall"</span>, pch <span class="op">=</span> <span class="fl">19</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">predict_1</span>, col <span class="op">=</span> <span class="st">"deeppink"</span>, lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">predict_2</span>, col <span class="op">=</span> <span class="st">"dodgerblue"</span>, lwd <span class="op">=</span> <span class="fl">2</span>, lty <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p><img src="Fitting-rainfall-profiles_files/figure-html/unnamed-chunk-4-1.png" width="672"></p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Pete Winskill.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
